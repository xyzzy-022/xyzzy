2010-07-14  NANRI Masaoki  <southly@gmail.com>

	* src : fix format "~T".
	「~colnum,colincT」のとき、「colnum+k*colinc」を満たす最小の正の整数kで
	桁を求めるように修正。
	(format nil "~0,1T")
	=> " "

2010-07-14  NANRI Masaoki  <southly@gmail.com>

	* src : fox format "~VT" in the case of being provided '() as a prefix parameter.
	Vに引数としてnilを渡したときの動作を修正。

2010-07-14  NANRI Masaoki  <southly@gmail.com>

	* src : fix for VC2010.
	Microsoft Visual C++ 2010 でのビルド用に修正。
	Makefileの修正のみ。

2010-03-01  NANRI Masaoki  <southly@gmail.com>

	* src : fix "*load-pathname*" initialization.
	ダンプ作成時にロードしたファイル名がそのままダンプファイルに保存される
	ようなので、起動時にも初期化するように修正。

2010-03-01  NANRI Masaoki  <southly@gmail.com>

	* src : fix format "~F".
	formatの"~F"の第一パラメータwを指定しないと第三パラメータkが機能しない
	のを修正。

	(dotimes (i 10)
	  (format t "~,,VF~%" i pi))
	3.141592653589793
	31.41592653589793
	314.1592653589793
	3141.592653589793
	31415.92653589793
	314159.2653589793
	3141592.653589793
	31415926.53589793
	314159265.3589793
	3141592653.589793
	nil

	(do ((i -9 (1+ i)))
	    ((> i 9))
	  (format t "~,,VF~%" i pi))
	-0.000000009
	-0.00000008
	-0.0000007
	-0.000006
	-0.00005
	-0.0004
	-0.003
	-0.02
	-0.1
	0.0
	10.0
	200.0
	3000.0
	40000.0
	500000.0
	6000000.0
	70000000.0
	800000000.0
	9000000000.0
	nil

2010-02-21  NANRI Masaoki  <southly@gmail.com>

	* src : fix applyhook.
	applyhook, *applyhook* をローカル関数に対応させた。
	call_applyhookの第一引数にクロージャを渡すように変更した。

2010-02-21  NANRI Masaoki  <southly@gmail.com>

	* src : add "*read-eval*".
	スペシャル変数*read-eval*が機能するようにした。
	*read-eval*の出力への影響の理解が怪しい。
	*read-eval*がnilの場合はencodingをunreadable-objectとして出力するようし
	ているが、自信なし。

2010-01-23  NANRI Masaoki  <southly@gmail.com>

	* src : fix for VC2008.
	Microsoft Visual C++ 2008 でのビルド用に修正。
	http://xyzzy.s53.xrea.com/wiki/index.php?Memo%2F%A5%BD%A1%BC%A5%B9%A4%AB%A4%E9%A5%D3%A5%EB%A5%C9%A4%B7%A4%C6%A4%DF%A4%EB3

2010-01-23  NANRI Masaoki  <southly@gmail.com>

	* src : add get-buffer-colors.
	関数get-buffer-colorsを追加。
	set-buffer-colorsと対となる現在のバッファの色設定を取得する関数。

2010-01-22  NANRI Masaoki  <southly@gmail.com>

	* src : fix listen.
	EOFのときにnilを返すように修正。
	分かる範囲ということでstring-streamとfile-streamだけ。

2010-01-11  NANRI Masaoki  <southly@gmail.com>

	* src : fix save-window-excursion.
	(save-window-excursion (values 1 2 3))
	で正しく多値が返らない場合があるのを修正。
	xyzzy Part11 8

	WindowConfigurationのデストラクタ内でLispのコードが実行されるので、
	WindowConfigurationのデストラクタを実行したあとで、多値を元の値に戻
	す必要がある。

2010-01-11  NANRI Masaoki  <southly@gmail.com>

	* lisp : fix long-operation.
	long-operationの戻り値がprog1相当になっているのをprogn相当になるよ
	うに修正。
	xyzzy Part10 470

2009-12-26  NANRI Masaoki  <southly@gmail.com>

	* src : update zlib.
	zlibをバージョン1.2.3にアップデート。

2009-12-17  NANRI Masaoki  <southly@gmail.com>

	* src : add key parameter ":show" to make-process.
	make-processにキーパラメータ :show を追加する。
	http://xyzzy.s53.xrea.com/wiki/index.php?patch%2F12

2009-12-16  NANRI Masaoki  <southly@gmail.com>

	* src : support IMR_DOCUMENTFEED.
	via http://fixdap.com/p/xyzzy/7376/
	以下で動作を確認。
	さいた　　　　　あたたかい
	布を　　　　　　牛乳
	花が　　　　　　春
	時間を　　　　　

2009-12-16  NANRI Masaoki  <southly@gmail.com>

	* src : fix set-buffer-modified-p.
	(set-buffer-modified-p nil) をした時に以前更新なし状態だった点が更
	新無し状態のままなのを修正。

2009-12-16  NANRI Masaoki  <southly@gmail.com>

	* src : fix inverse-cursor-line.
	(setq inverse-cursor-line t)
	の状態にすると行カーソルと折り返し線の交点が反転したまま残ってしま
	うのを修正。

2009-12-09  NANRI Masaoki  <southly@gmail.com>

	* src : add "*brackets-is-wildcard-character*" to history-variable.
	共通設定の「[...]はワイルドカード」の設定が保存されないので、対応す
	る変数をヒストリに追加。

	* src : fix dump hash-table.
	シンボルがキーのハッシュテーブルをダンプファイルに入れた場合、
	gethashで値がとれない問題があった。ただし、maphashで全要素を取得す
	ることはできた。
	---- $XYZZY/site-lisp/siteinit.l の内容
	(defparameter *hash* (make-hash-table))
	(dolist (i '((aaa . abab) (bbb . bcbc) (ccc . cdcd)))
	  (setf (gethash (car i) *hash*) (cdr i)))
	---- ダンプファイルをロードしたあとに評価
	(gethash 'aaa *hash*)
	=>nil ; 本来は abab
	=>nil ;        t

	(maphash #'(lambda (key val) (format t "~S: ~S~%" key val)) *hash*)
	aaa: abab
	bbb: bcbc
	ccc: cdcd
	=>nil
	----
	シンボルのハッシュ値はオブジェクトのアドレスを元に計算しているが、
	ダンプファイル作成時とダンプファイルロード後ではシンボルオブジェク
	トのアドレスが異なり、同一のハッシュ値にならないのが原因。

	ダンプファイルをロードしたあとにrehashするように修正。

	* lisp : fix defpackage.
	defpackageマクロで:exportオプションを指定できない不具合を修正。
	[xyzzy:09241]

	* lisp : fix shell-alternate-send-input.
	http://xyzzy.s53.xrea.com/wiki/index.php?patch%2F15

	* lisp : fix calendar.
	カレンダーの祝日を現行法にあわせる。
	[xyzzy:09224]

	* lisp : fix typo in lisp/timestmp.l.
	コメントのtypoを修正。
	[xyzzy:09158]

	* lisp : fix typo in lisp/encoding.l.
	provideのtypoを修正。
	[xyzzy:09158]

	* lisp : fix typo in lisp/css-mode.l.
	provideのtypoを修正。
	[xyzzy:09158]

	* lisp : fix typo in lisp/builtin.l.
	主に引数のtypoを修正。
	[xyzzy:09158]

	* src : fix hash-table rehash size.
	ハッシュテーブルの要素数が80000を越える辺りから、ハッシュテーブルの
	サイズの増加量が100に固定される。そのため頻繁にrehashされパフォーマ
	ンスが低下していた。
	rehashするときは最低でも前のサイズの1.5倍になるようにした。

	* src : fix ole-method.
	ole-method で文字列を渡すと余計な 0x00 が付く問題
	via http://fixdap.com/p/xyzzy/8379/
	via http://d.hatena.ne.jp/miyamuko/20080304/xyzzy_ole_method_bug

	* src : fix for FFI.
	戻り値が double, float の C 関数を呼ぶとクラッシュする
	http://xyzzy.s53.xrea.com/wiki/index.php?patch%2F25
	via http://d.hatena.ne.jp/miyamuko/20070509/p1

	* src : fix start-timer.
	http://xyzzy.s53.xrea.com/wiki/index.php?patch%2F21

	* src : fix format "~G".
	[xyzzy:09204]

	* src : fix format "~E".
	[xyzzy:09204]

	* src : fix format "~F".
	[xyzzy:09204]

	* src : fix format "~R".
	[xyzzy:09198]

	* src : fix for VC2005.
	Microsoft Visual C++ 2005 でビルドできるように、こまごまと修正。
	http://xyzzy.s53.xrea.com/wiki/index.php?patch%2F13
